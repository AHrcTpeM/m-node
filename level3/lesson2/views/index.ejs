<% 
    const OFFSET = 7;
    const topPage = Math.max(Math.ceil(books.length / OFFSET) - 1, 0);

    if (+page < 0) {
        page = 0;
    }        
    if (+page > topPage) {
        page = topPage;
    };
%>
<!DOCTYPE html>
<!-- saved from url=(0054)file:///home/andy/Desktop/books-page/shpp-library.html -->
<html lang="ru">

<%- include('./partials/head', {title: 'shpp-library+'}) %>

<body data-gr-c-s-loaded="true" class="">
    <%- include('./partials/header', {placeholder: 'Find a book', visibility: 'visibility:none', url: ''}) %>
    <section id="main" class="main-wrapper">
        <div class="container">
            <div id="content" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <%- include('./partials/books', {books: books, start: 0 + OFFSET * page, end: OFFSET + OFFSET * page, search}) %>


                <!-- < % books.forEach(item => { %>
                    < %- include('./partials/book', {id: item.id, title: item.title, author: item.author}) %>
                < % }) %> -->
                
                <!-- < % for (let i = 0; i < books.length; i++) { %>
                    < %- include('./partials/book', {id: books[i].id, title: books[i].title, author: books[i].author}) %>
                < % } %>  -->
               
             </div>
        </div>

        <div style="text-align: center;">
            <% 
            let querySearch = '';
            if (search) {
                querySearch = '&search=' + search;
            } %>
            <% if (+page > 0) { %>
                <a href="/?page=<%= +page - 1 %><%=querySearch%>">Назад</a>
            <% } %>           
            <% if (+page < topPage) { %>
                <a href="/?page=<%= +page + 1 %><%=querySearch%>">Вперед</a>
            <% } %>
        </div>
        <!-- <center>оопс... в этом хтмл не реализованы кнопки "вперед" и "назад", а книг на странице должно быть не больше 20</center> -->

    </section>
    <%- include('./partials/footer', {team: 'HolaTeam*'}) %>

    <div class="sweet-overlay" tabindex="-1" style="opacity: -0.02; display: none;"></div>
    <div class="sweet-alert hideSweetAlert" data-custom-class="" data-has-cancel-button="false" data-has-confirm-button="true" data-allow-outside-click="false" data-has-done-function="false" data-animation="pop" data-timer="null" style="display: none; margin-top: -169px; opacity: -0.03;">
        <div class="sa-icon sa-error" style="display: block;">
            <span class="sa-x-mark">
        <span class="sa-line sa-left"></span>
            <span class="sa-line sa-right"></span>
            </span>
        </div>
        <div class="sa-icon sa-warning" style="display: none;">
            <span class="sa-body"></span>
            <span class="sa-dot"></span>
        </div>
        <div class="sa-icon sa-info" style="display: none;"></div>
        <div class="sa-icon sa-success" style="display: none;">
            <span class="sa-line sa-tip"></span>
            <span class="sa-line sa-long"></span>

            <div class="sa-placeholder"></div>
            <div class="sa-fix"></div>
        </div>
        <div class="sa-icon sa-custom" style="display: none;"></div>
        <h2>Ооопс!</h2>
        <p style="display: block;">Ошибка error</p>
        <fieldset>
            <input type="text" tabindex="3" placeholder="">
            <div class="sa-input-error"></div>
        </fieldset>
        <div class="sa-error-container">
            <div class="icon">!</div>
            <p>Not valid!</p>
        </div>
    </div>
</body>

</html>